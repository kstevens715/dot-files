" =============== Auto-reload ===============
aug AutoloadVimrc
  au!
  au BufWritePost ~/dot-files/vim/vimrc source $MYVIMRC
aug END

runtime macros/matchit.vim

" Use Vim settings, rather then Vi settings (much better!).
" This must be first, because it changes other options as a side effect.
set nocompatible
set nowrap

source $HOME/dot-files/vim/bundle.vim

set laststatus=2 " Always show a statusline

" =============== Command Aliases ===============
command! -bang WQ wq<bang>
command! -bang Wq wq<bang>
command! -bang W w<bang>
command! -bang Q q<bang>
command! -bang Qa qa<bang>

" Turn off Ex mode
nnoremap Q <nop>

" ================= CtrlP Settings ===============
let g:ctrlp_map = '<Leader>t'
let g:ctrlp_user_command = ['.git/', 'cd %s && git ls-files --exclude-standard -co']
let ctrlp_max_height=100
let g:ctrlp_max_files=0

set showmode

" ================= Autocompletion ===============
filetype plugin on
set omnifunc=syntaxcomplete#Complete

" psql files should be highlighted as sql
au BufNewFile,BufRead *.psql set filetype=sql
au BufNewFile,BufRead Guardfile set filetype=ruby

" Point to Ubuntu's Ack executable
let g:ackprg="ack-grep -H --nopager --nocolor --nogroup --column"

set backspace=2         " Backspace not working without this.
set number

" =================== Liaison Helpers =================
set colorcolumn=141

let g:vimrubocop_config = '~/code/webadmit/.ruby-style.yml'
let g:vimrubocop_keymap = 0
nmap <Leader>r :RuboCop<CR>

" ================ Turn Off Swap Files ==============
set noswapfile
set nobackup
set nowb

" ================ Indentation ======================
filetype indent plugin on
set autoindent
set smartindent
set smarttab
set shiftwidth=2
set softtabstop=2
set tabstop=2
set expandtab

set ignorecase
set smartcase
set incsearch

" Use system clipboard
set clipboard=unnamedplus

" ================ Theme ======================
set t_Co=256
syntax on
colorscheme monokai

" Highlight html in JavaScript template strings
autocmd FileType javascript JsPreTmpl html

" Highlight trailing whitespace
highlight ExtraWhitespace ctermbg=red guibg=red
match ExtraWhitespace /\s\+$/
autocmd BufWinEnter * match ExtraWhitespace /\s\+$/
autocmd InsertEnter * match ExtraWhitespace /\s\+\%#\@<!$/
autocmd InsertLeave * match ExtraWhitespace /\s\+$/
autocmd BufWinLeave * call clearmatches()

source $HOME/dot-files/vim/keymaps.vim
source $HOME/dot-files/vim/abbreviations.vim

set nofoldenable
